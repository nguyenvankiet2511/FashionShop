<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cosmic Store</title>
    <link rel="icon" type="image/png" href="static/images/icons/favicon.png"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
          integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
          crossorigin="anonymous" referrerpolicy="no-referrer"/>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/navbarpage.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/profile.css') }}">
</head>

<body>
<div class="wrapper-container">
    <nav id="sidebar">
        <div class="sidebar-content">
            <a class="sidebar-brand" href="{{url_for('view_home_employee')}}">
                <span>Nhân viên bán hàng</span>
            </a>
            <ul class="sidebar-nav">
                <li class="sidebar-header">Trang</li>
                <li class="sidebar-item active">
                    <a class="sidebar-link" href="{{url_for('view_home_employee')}}">
                        <i class="fa-solid fa-house"></i> <span>Trang Chủ</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a class="sidebar-link" href="{{url_for('view_employee_profile')}}">
                        <i class="fa-solid fa-user"></i> <span>Hồ Sơ</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a class="sidebar-link" href="{{url_for('view_customercare')}}">
                        <i class="fa-solid fa-headset"></i> <span>Chăm Sóc Khách Hàng</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a class="sidebar-link" href="{{url_for('view_order_manager')}}">
                        <i class="fa-solid fa-user-plus"></i> <span>Chi Tiết Đơn Hàng</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a class="sidebar-link" href="{{url_for('view_payment')}}">
                        <i class="fa-solid fa-credit-card"></i> <span>Thanh Toán</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a class="sidebar-link" href="{{url_for('user_logout')}}">
                        <i class="fa-solid fa-sign-in-alt"></i> <span>Đăng Xuất</span>
                    </a>
                </li>
            </ul>
        </div>
    </nav>
    <div class="main">
        <nav class="navbar">
            <button class="sidebar-toggle">
                <i class="fa-solid fa-bars"></i>
            </button>
            <div class="navbar-content">
                <div class="search-container">
                    <button class="search-btn">
                        <i class="fa-solid fa-magnifying-glass"></i>
                    </button>
                    <input type="text" class="search-input" placeholder="Search...">
                </div>
                <ul class="navbar-nav">
                    <li class="nav-item dropdown">
                        <a class="nav-icon" href="#" id="alertsDropdown">
                            <i class="fa-solid fa-bell"></i>
                            <span class="indicator">4</span>
                        </a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-icon" href="#" id="messagesDropdown">
                            <i class="fa-solid fa-envelope"></i>
                        </a>
                    </li>
                    <li class="nav-item dropdown">

                        <a class="nav-link profile-toggle" href="#">
                            <img src="{{ url_for('static', filename='images/'+user.photoPath) }}" alt="Charles Hall" class="avatar">
                            <span>{{user.name}}</span>
                        </a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" href="{{ url_for('view_employee_profile')}}">Profile</a>
                            <a class="dropdown-item" href="#">Analytics</a>
                            <a class="dropdown-item" href="index.html">Settings & Privacy</a>
                            <a class="dropdown-item" href="#">Help Center</a>
                            <a class="dropdown-item" href="#">Log out</a>
                        </div>
                    </li>
                </ul>
            </div>
        </nav>
        <div class="container-ppt">


            <div class="container-nabar">
                <div class="navbar-translate">
                    <div class="align-items-center"
                         style="background-image: url('{{ url_for('static', filename='images/'+ user.photoPath) }}');">
                        <div class="container-fluid">
                            <div class="row">
                                <div class="namenav">
                                    <h1 class="display-2 text-white">Xin chào {{ user.name }}</h1>
                                    <p class="text-white mt-0 mb-5">Đây là trang hồ sơ của bạn. Bạn có thể xem tiến
                                        trình
                                        bạn đã đạt được trong công việc và quản lý dự án hoặc các nhiệm vụ được
                                        giao.</p>
                                    <a href="#!" class="btn btn-info">Chỉnh sửa hồ sơ</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


            <div class="profile-row">
                <div class="profile-container">
                    <div class="personal-info">
                        <h2>Thông tin cá nhân</h2>

                        <form id="profile-form">
                            <label for="name"><strong>Tên:</strong></label>
                            <input type="text" id="name" name="name" value="{{user.name}}" >

                            <label for="email"><strong>Email:</strong></label>
                            <input type="email" id="email" name="email" value="{{user.email}}" readonly>

                            <label for="phone"><strong>Số điện thoại:</strong></label>
                            <input type="tel" id="phone" name="phone" value="{{user.phone}}">

                            <label for="address"><strong>Địa chỉ:</strong></label>
                            <input type="text" id="address" name="address" value="{{user.address}}">

                            <label for="gender"><strong>Giới tính:</strong></label>
                            <input type="text" id="gender" name="gender" value="{{ 'Nam' if user.gender else 'Nữ' }}" readonly>


                            <label for="customer-code"><strong>Ngày sinh:</strong></label>
                            <input type="text" id="customer-code" name="customer-code" value="{{user.birthDate}}" >

                            <button type="submit" class="btn-save">Lưu thay đổi</button>
                        </form>


                    </div>
                </div>

                <div class="container">
                    <div class="row">
                        <div class="col-md-6 ml-auto mr-auto">
                            <div class="profile">
                                <div class="avatar">
                                    <img src="{{ url_for('static', filename='images/'+ user.photoPath) }}"
                                         alt="Circle Image" class="img-raised rounded-circle img-fluid">
                                </div>
                                <div class="name">
                                    <h3 class="title">{{ user.name }}</h3>
                                    <h6>Customer</h6>
                                    <a href="#pablo" class="btn btn-just-icon btn-link btn-facebook"><i
                                            class="fab fa-facebook"></i></a>
                                    <a href="#pablo" class="btn btn-just-icon btn-link btn-google"><i
                                            class="fab fa-google"></i></a>
                                    <a href="#pablo" class="btn btn-just-icon btn-link btn-twitter"><i
                                            class="fab fa-twitter"></i></a>

                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="description text-center">
                        <p>"Khách hàng là nền tảng của mọi doanh nghiệp. Họ tìm kiếm chất lượng, giá trị và trải nghiệm
                            mua sắm tuyệt vời. Một khách hàng hài lòng không chỉ quay lại mà còn quảng bá thương hiệu
                            đến người khác."</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    const form = document.getElementById('profile-form');

    // Hàm để lưu dữ liệu
    function saveData() {
        const formData = new FormData(form);
        fetch('/save-profile', {
            method: 'POST',
            body: formData
        })
        .then(response => response.json())
        .then(data => {
            console.log(data);
        })
        .catch(error => {
            console.error('Error:', error);
        });
    }

    // Lắng nghe sự kiện input để tự động lưu
    form.addEventListener('input', saveData);

    // Lắng nghe sự kiện submit để xử lý khi nhấn nút "Lưu thay đổi"
    form.addEventListener('submit', function(event) {
        event.preventDefault(); // Ngăn chặn làm mới trang
        saveData(); // Lưu lại thông tin khi nhấn nút
        // Không xóa dữ liệu trong form
        alert('Đã lưu thay đổi!');
    });


</script>
<script src="{{ url_for('static', filename='js/nabarpage.js') }}"></script>
</body>
</html>
